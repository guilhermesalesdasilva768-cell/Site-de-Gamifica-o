<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grow System - Dashboard</title>
    <style>
      :root {
    /* Gradiente de fundo (azuis claros) */
    --bg-gradient-start: #00C6FF; /* Azul claro vibrante */
    --bg-gradient-end: #0072FF;   /* Azul mais profundo */

    /* Cores predominantes dos cards */
    --card-bg: #0D1E31; /* Azul grafite escuro */
    --card-header-bg: #0A0F24; /* Fundo sólido escuro */
    --border-color: rgba(255, 255, 255, 0.1);

    /* Texto */
    --text-primary: #FFFFFF;
    --text-secondary: #B3B9C5;

    /* Medalhas */
    --medal-gold: #FFB800;
    --medal-silver: #B0B9C6;
    --medal-bronze: #D07C3D;
}

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(180deg, var(--bg-gradient-start), var(--bg-gradient-end));
            color: var(--text-primary);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            background-color: var(--card-header-bg);
            color: var(--text-primary);
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .profile {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

.avatar {
  border: 3px solid #fff; /* Cor e espessura da borda */
  border-radius: 50%;     /* Torna a borda arredondada */
  padding: 2px;           /* Espaço entre a borda e a imagem */
}

        .profile-info h2 {
            margin: 0;
            font-size: 1.5rem;
        }

        .xp-badge {
            background-color: rgba(0, 0, 0, 0.3);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .xp-badge img {
            width: 16px;
            height: 16px;
        }

  .nav-icons {
  display: flex;
  justify-content: space-around;
  padding: 15px 0; /* só espaçamento, sem cor */
}

.nav-icon {
  display: flex;
  flex-direction: column;
  align-items: center;
  color: white;
  font-size: 14px;
  cursor: pointer;
  transition: color 0.3s;
}

.nav-icon i {
  width: 28px;   /* tamanho do ícone */
  height: 28px;
  margin-bottom: 5px;
}

.nav-icon:hover {
  color: gold; /* muda cor ao passar o mouse */
}


        .nav-icon img {
            width: 40px;
            height: 40px;
            margin-bottom: 5px;
        }

        .nav-icon span {
            font-size: 0.9rem;
        }

        .main-content {
            margin-top: 30px;
        }

        .home-section, .ranking-section, .fun-section, .ponto-section, .learn-section {
            text-align: center;
            padding: 40px 20px;
            background-color: var(--card-bg);
            border-radius: 15px;
            margin-bottom: 30px;
            display: none;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .home-section {
            display: block;
        }

        .home-section h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: var(--text-primary);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.4);
        }

        .home-section p {
            font-size: 1.1rem;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto 30px;
            color: var(--text-secondary);
        }

        .section-title {
            font-size: 2rem;
            margin-top: 0;
            margin-bottom: 30px;
            text-align: center;
            color: var(--text-primary);
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        }

        /* --- Ranking Section --- */
        .ranking-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .ranking-table th, .ranking-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .ranking-table th {
            background-color: var(--card-header-bg);
            font-size: 1.1rem;
            color: var(--text-secondary);
        }

        .ranking-table tr:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .user-cell {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }

        .medal {
            width: 25px;
            height: 25px;
            margin-left: 10px;
        }

        .position-1 {
            background-color: rgba(255, 184, 0, 0.1);
        }

        .position-2 {
            background-color: rgba(176, 185, 198, 0.1);
        }

        .position-3 {
            background-color: rgba(208, 124, 61, 0.1);
        }

        .xp-cell {
            font-weight: bold;
        }

        .xp-coins {
            color: var(--medal-gold);
        }

        /* --- Fun Section --- */
        .fun-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: var(--card-bg);
            border-radius: 15px;
            padding: 40px 20px;
            margin-bottom: 30px;
            text-align: center;
        }

        .fun-section .section-title {
            font-size: 2.2rem;
            margin-bottom: 30px;
            color: var(--text-primary);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .memory-game-container, .fire-game-container, .detroit-game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
            margin-bottom: 40px;
        }

        .memory-game-icon, .fire-game-icon, .detroit-gamer-container {
            width: 120px;
            height: 120px;
            cursor: pointer;
            transition: transform 0.3s ease-in-out;
            filter: drop-shadow(4px 4px 6px rgba(0, 0, 0, 0.3));
        }

        .memory-game-icon:hover, .fire-game-icon:hover, .detroit-gamer-container {
            transform: scale(1.1);
            filter: drop-shadow(6px 6px 8px rgba(0, 0, 0, 0.4));
        }

        .play-button {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            background-color: var(--medal-gold);
            color: var(--card-header-bg);
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease-in-out, transform 0.2s ease-in-out;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
        }

        .play-button:hover {
            background-color: #0d1012;
            transform: translateY(-3px);
            box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.4);
        }

        .play-button:active {
            transform: translateY(1px);
            box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        }

        footer {
            text-align: center;
            padding: 20px 0;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            margin-top: 40px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }

        /* === Responsividade Progressiva === */
    /* Base - celulares pequenos */
    body { font-size: 14px; }
    .container { padding: 10px; }
    header { flex-direction: column; gap: 10px; text-align: center; }
    .avatar { width: 50px; height: 50px; }
    .home-section h1 { font-size: 1.8rem; }

    /* Tablets */
    @media (min-width: 600px) {
      body { font-size: 16px; }
      header { flex-direction: row; padding: 15px; }
      .container { padding: 15px; }
      .home-section h1 { font-size: 2rem; }
    }

    /* Notebooks */
    @media (min-width: 992px) {
      body { font-size: 18px; }
      .container { padding: 20px; }
      .home-section h1 { font-size: 2.3rem; }
    }

    /* Telas grandes */
    @media (min-width: 1200px) {
      body { font-size: 20px; }
      .container { max-width: 1400px; }
      .home-section h1 { font-size: 2.5rem; }
    }

        @media (max-width: 768px) {
            body {
                padding: 0 10px;
            }

            header {
                flex-direction: column;
                gap: 15px;
                padding: 10px;
            }

            .profile {
                width: 100%;
                justify-content: center;
                text-align: center;
            }

            .nav-icons {
                width: 100%;
                justify-content: space-around;
                gap: 10px;
            }

            .nav-icon img {
                width: 35px;
                height: 35px;
            }

            .nav-icon span {
                font-size: 0.8rem;
            }
            
            .home-content {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .ranking-table th, .ranking-table td,
            .history-table th, .history-table td {
                padding: 8px;
                font-size: 0.85rem;
            }
            
            .user-cell {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }

            .user-avatar {
                margin-bottom: 5px;
            }
            
            .learn-topic .topic-header {
                font-size: 1.2rem;
            }
        }

        .trophy-icon {
            width: 40px;
            height: 40px;
        }

        .fun-icon {
            width: 40px;
            height: 40px;
        }

        .gold-coin {
            width: 16px;
            height: 16px;
        }

        /* Styles for the History Table */
        .history-table-container {
            max-width: 900px;
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 20px;
            margin: 0 auto;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .history-table-container h3 {
            color: var(--text-primary);
            margin-bottom: 15px;
            font-size: 1.5rem;
            text-align: center;
        }

        .history-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .history-table th, .history-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            color: var(--text-primary);
        }

        .history-table th {
            background-color: var(--card-header-bg);
            font-weight: bold;
            color: var(--text-secondary);
        }

        .history-table tbody tr:last-child td {
            border-bottom: none;
        }

        .history-table .no-data {
            text-align: center;
            color: var(--medal-gold);
            font-weight: bold;
        }

        /* New styles for the Learn Section */
        .learn-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            text-align: left;
        }

        .learn-topic {
            width: 100%;
            max-width: 800px;
            padding: 10px;
            margin-bottom: 10px;
            background-color: var(--card-header-bg);
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .learn-topic:hover {
            background-color: rgba(10, 15, 36, 0.8);
        }

        .topic-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .topic-arrow {
            transition: transform 0.3s;
        }

        .topic-arrow.rotate {
            transform: rotate(90deg);
        }

        .topic-content {
            display: none;
            margin-top: 20px;
            font-size: 1.1rem;
            line-height: 1.6;
            color: var(--text-secondary);
        }

        .topic-content.show {
            display: block;
        }

        .topic-content h4 {
            color: var(--medal-gold);
            margin-bottom: 10px;
        }
        .topic-content ul {
            list-style-type: disc;
            padding-left: 20px;
        }
        .topic-content li {
            margin-bottom: 10px;
        }
        .learn-quiz-button {
            margin-top: 20px;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            background-color: var(--medal-gold);
            color: var(--card-header-bg);
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease-in-out, transform 0.2s ease-in-out;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
        }

        .learn-quiz-button:hover {
            background-color: #0d1012;
            transform: translateY(-3px);
            box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.4);
        }
        
        /* Novos estilos para a seção de Início (Home) */
        .home-content {
            display: grid;
            gap: 25px;
            grid-template-columns: 1fr;
            text-align: left;
        }

        @media (min-width: 768px) {
            .home-content {
                grid-template-columns: 1fr 1fr;
            }
        }

        .home-card {
            background-color: var(--card-header-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .home-card h3 {
            margin-top: 0;
            font-size: 1.5rem;
            color: var(--text-primary);
            border-bottom: 2px solid var(--medal-gold);
            padding-bottom: 10px;
        }

        .user-stats {
            display: flex;
            justify-content: space-around;
            align-items: center;
            text-align: center;
            margin-top: 15px;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--medal-gold);
        }

        .stat-label {
            font-size: 0.9em;
            color: var(--text-secondary);
        }

        .ranking-item {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
        }

        .ranking-item img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--medal-gold);
        }

        .ranking-item span {
            font-size: 1.1rem;
        }

        .ranking-item .rank-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--medal-gold);
        }

        .quiz-highlight {
            text-align: center;
        }

        .quiz-highlight .cta-button {
            background-color: var(--medal-gold);
            color: var(--card-header-bg);
            font-weight: bold;
            text-decoration: none;
            padding: 12px 25px;
            border-radius: 8px;
            transition: background-color 0.3s;
        }

        .quiz-highlight .cta-button:hover {
            background-color: #ffc94d;
        }

        .fact-of-day {
            text-align: center;
        }

        /* Bordas que evoluem conforme os BIPs */
.avatar.level-1 {
  border: 3px solid gray; /* iniciante */
}

.avatar.level-2 {
  border: 3px solid silver; /* intermediário */
  box-shadow: 0 0 8px silver;
}

.avatar.level-3 {
  border: 3px solid gold; /* avançado */
  box-shadow: 0 0 12px gold;
}

.avatar.level-4 {
  border: 3px solid linear-gradient(45deg, gold, red); /* lenda */
  box-shadow: 0 0 16px orange, 0 0 32px gold;
}

.avatar-container {
  display: inline-block;
  border-radius: 50%;
  padding: 3px;
}

.borda-ouro {
  box-shadow: 0 0 15px gold;
}
.borda-prata {
  box-shadow: 0 0 15px silver;
}
.borda-bronze {
  box-shadow: 0 0 15px peru;
}
.borda-padrao {
  box-shadow: 0 0 10px gray;
}

    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="profile">
                <img id="user-avatar" class="avatar" alt="Avatar">
<input type="file" id="avatar-upload" accept="image/*" style="display: none;">
                <div class="profile-info">
                    <h2 id="username">Usuário</h2>
                    <div class="xp-badge">
                        <svg class="gold-coin" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="10" fill="#FFB74D"/>
                            <circle cx="12" cy="12" r="8" fill="#FFD28C"/>
                            <text x="12" y="16" text-anchor="middle" font-size="10" font-weight="bold" fill="#8B4513">BIP</text>
                        </svg>
                        <span id="user-xp">0 BIP</span>
                    </div>
                </div>
            </div>

          <div class="nav-icons">
    <div class="nav-icon" onclick="showSection('home')">
        <i data-lucide="home"></i>
        <span>Início</span>
    </div>
    <div class="nav-icon" onclick="showSection('learn')">
        <i data-lucide="book-open"></i>
        <span>Saiba mais</span>
    </div>
    <div class="nav-icon" onclick="showSection('ponto')">
        <i data-lucide="clock"></i>
        <span>Ponto</span>
    </div>
    <div class="nav-icon" onclick="showSection('fun')">
        <i data-lucide="gamepad-2"></i>
        <span>Diversão</span>
    </div>
    <div class="nav-icon" onclick="showSection('ranking')">
        <i data-lucide="trophy"></i>
        <span>Ranking</span>
    </div>
</div>

        </header>

        <main class="main-content">
            <section class="home-section" id="home-section">
                <div class="home-content">
                    <div class="home-card">
                        <h3>Seu Progresso</h3>
                        <div class="user-stats">
                            <div class="stat-item">
                                <span class="stat-value" id="user-bips-home">0</span>
                                <span class="stat-label">BIPs Acumulados</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="user-rank-home">--</span>
                                <span class="stat-label">Posição no Ranking</span>
                            </div>
                        </div>
                    </div>

                    <div class="home-card quiz-highlight">
                        <h3>Novo Desafio!</h3>
                        <p>Teste seus conhecimentos com nosso novo quiz e ganhe até 5 BIPs.</p>
                        <a href="quizlgbt.html" class="cta-button">Jogar Quiz Agora</a>
                    </div>

                   <div class="home-card">
    <h3>Ranking Top 3</h3>
    <ul id="home-ranking-list">
        <li class="rank-item">
            <img src="assets/resources/gold-medal.png" alt="Medalha Ouro" class="medal">
            <span>#1 Mayara Santos</span>
        </li>
        <li class="rank-item">
            <img src="assets/resources/silver-medal.png" alt="Medalha Prata" class="medal">
            <span>#2 Isac Batista</span>
        </li>
        <li class="rank-item">
            <img src="assets/medal3.png" alt="Medalha Bronze" class="medal">
            <span>#3 Yulkedsley</span>
        </li>
    </ul>
</div>


                    <div class="home-card fact-of-day">
                        <h3>Fato do Dia</h3>
                        <p><b>"A gamificação aumenta o engajamento em 60% e a retenção de conhecimento em 40%."</b></p>
                    </div>
                </div>
            </section>
            
            <section class="learn-section" id="learn-section">
                <h2 class="section-title">Aprenda</h2>
                <div class="learn-topic" onclick="toggleTopic('lgbt-topic')">
                    <div class="topic-header">
                        Conscientização contra a LGBTQIA+ fobia
                        <span class="topic-arrow">&#9654;</span>
                    </div>
                </div>
                <div id="lgbt-topic-content" class="topic-content">
                    <h4>O que é a Comunidade LGBT?</h4>
                    <p>História : A homossexualidade não é um fenômeno moderno: registros de relações e afetos entre pessoas do mesmo sexo existem desde as primeiras civilizações. O que mudou ao longo da história foi a forma como cada sociedade a interpretou, aceitou ou reprimiu.
                    A homossexualidade passou a ser estudada pela medicina e psicologia, mas classificada como desvio ou doença. Apesar disso, intelectuais, artistas e escritores — como Oscar Wilde — desafiaram as normas, tornando-se símbolos de resistência.
                    A homossexualidade é reconhecida como parte natural da diversidade humana por instituições científicas e de direitos humanos, mas ainda enfrenta resistência cultural e política em muitos lugares..</p>
                    <p>Aqui estão alguns conceitos importantes:</p>
                    <ul>
                        <li>🌈 Diversidade e inclusão: A comunidade LGBT reúne pessoas lésbicas, gays, bissexuais, trans e outras identidades de gênero e orientações sexuais.</li>
                        <li>🤝 Direitos e visibilidade: Luta por igualdade, respeito e oportunidades, promovendo a conscientização e combatendo a discriminação.</li>
                        <li>🎉 Cultura e representatividade: Valoriza a expressão individual, celebrações e movimentos que fortalecem a presença LGBT na sociedade.</li>
                        <li>🚀 Conquistas e avanços: Movimentos sociais têm garantido direitos, fortalecendo a diversidade e a liberdade de ser quem cada um é.</li>
                    </ul>
                    <button class="learn-quiz-button" onclick="window.location.href='quizlgbt.html'">Jogar o Quiz</button>
                </div>

                <div class="learn-topic" onclick="toggleTopic('inclusao-topic')">
                    <div class="topic-header">
                        Pessoas Surdas
                        <span class="topic-arrow">&#9654;</span>
                    </div>
                </div>
                <div id="inclusao-topic-content" class="topic-content">
                    <h4>INFORMAÇÕES IMPORTANTES SOBRE PESSOAS SURDAS</h4>
                    <p>A Língua Brasileira de Sinais (Libras) surgiu no século XIX, com a fundação do Instituto Nacional de Educação de Surdos (1857), a partir da mistura de sinais já usados no Brasil e da Língua de Sinais Francesa. Em 2002, foi reconhecida por lei como meio oficial de comunicação, consolidando-se como parte essencial da inclusão e identidade da comunidade surda.</p>
                    <p>Pontos importantes sobre a comunidade surda:</p>
                    <ul>
                        <li>🗣️ Surdo não é mudo: muitas pessoas surdas falam; outras preferem Libras.</li>
                        <li>📌 Cultura Surda existe: envolve valores, formas próprias de comunicação, arte e identidade.</li>
                        <li>✨ Orgulho Surdo: ser surdo é uma identidade cultural, não uma deficiência.</li>
                        <li>📖 Libras é língua oficial no Brasil (Lei 10.436/2002): tem o mesmo status que o português.</li>
                        <li>🚨 Desafios: falta de intérpretes e acessibilidade em escolas, hospitais e eventos.</li>
                        <li>✅ Respeito: Libras não é acessório; pessoas surdas devem ser respeitadas em sua forma de comunicação.</li>
                    </ul>
                    <button class="learn-quiz-button" onclick="window.location.href='quizlibras.html'">Jogar o Quiz</button>
                </div>

                <div class="learn-topic" onclick="toggleTopic('pcd-topic')">
                    <div class="topic-header">
                        História do Senai
                        <span class="topic-arrow">&#9654;</span>
                    </div>
                </div>
                <div id="pcd-topic-content" class="topic-content">
                    <h4>História do SENAI</h4>
                    <p>O Serviço Nacional de Aprendizagem Industrial (SENAI) foi criado em 1942 para formar profissionais qualificados e apoiar o desenvolvimento da indústria brasileira. Desde então, tornou-se uma das maiores instituições de educação profissional da América Latina, oferecendo cursos técnicos, de qualificação, graduação e pós-graduação voltados para diferentes áreas da indústria.</p>
                    <p>Pontos importantes sobre o SENAI::</p>
                    <ul>
                        <li>🏭 Fundado em 1942, durante o governo de Getúlio Vargas, para atender à demanda de mão de obra da indústria.</li>
                        <li>🎓 É referência em educação profissional e tecnológica no Brasil.</li>
                        <li>🌎 Está presente em todos os estados, com escolas, faculdades, institutos de inovação e tecnologia.</li>
                        <li>🤝 Atua em parceria com empresas, desenvolvendo soluções e capacitando trabalhadores.</li>
                        <li>🚀 Contribui para a inovação e competitividade da indústria brasileira.</li>
                    </ul>
                    <button class="learn-quiz-button" onclick="window.location.href='Quiz.html'">Jogar o Quiz</button>
                </div>
            </section>

            <section class="ponto-section" id="ponto-section">
                <h2 class="section-title">Histórico de Pontos</h2>
                <div class="history-table-container">
                    <table class="history-table">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Hora</th>
                                <th>Moedas Ganhas</th>
                            </tr>
                        </thead>
                        <tbody id="history-table-body">
                        </tbody>
                    </table>
                </div>
            </section>

            <section class="fun-section" id="fun-section">
                <h2 class="section-title">Diversão</h2>
                <div class="memory-game-container">
                    <img src="assets/resources/memoria.png" alt="Ícone Jogo da Memória" class="memory-game-icon">
                    <button class="play-button" onclick="window.location.href='memoria.html'">Jogo da Memória</button>
                </div>

                <hr style="width: 80%; border: 1px solid rgba(255, 255, 255, 0.2); margin: 30px auto;">

                <div class="fire-game-container">
                    <img src="assets/Fire/fire-extinguisher.png" alt="Ícone Jogo de Incêndio" class="fire-game-icon">
                    <button class="play-button" onclick="window.location.href='fire.html'">Jogo Combate ao Fogo</button>
                </div>

                <div class="detroit-game-container">
                    <img src="assets/resources/th (9).jpeg" alt="Ícone Quiz" class="detroit-game-icon">
                    <button class="play-button" onclick="window.location.href='detroit.html'">Jogo do Juninho</button>
                </div>
            </section>

            <section class="ranking-section" id="ranking-section">
                <h2 class="section-title">Ranking da Semana</h2>
                <table class="ranking-table">
                    <thead>
                        <tr>
                            <th>Posição</th>
                            <th>Usuário</th>
                            <th>BIP</th>
                        </tr>
                    </thead>
                    <tbody id="ranking-body">
                    </tbody>
                </table>
            </section>
        </main>

        <footer>
            <p>Gamificação &copy; 2025 - Todos os direitos reservados</p>
        </footer>
    </div>

    <script>
       // Ranking global vem sempre do backend
let rankingData = [];

// Usuário logado (começa vazio, será carregado do backend)
let usuarioLogado = {
    id: null,
    nome: "Usuário",
    avatar: "https://via.placeholder.com/60",
    moedas: 0
};

// 🔹 Buscar usuário logado no backend
async function fetchUsuarioLogado(id) {
    try {
        const res = await fetch(`https://meu-site4.onrender.com/api/usuario-logado/${id}`);
        const data = await res.json();
        if (data.status === "sucesso") {
            usuarioLogado = data.usuario;
        } else {
            console.warn("Usuário não encontrado no backend.");
        }
    } catch (err) {
        console.error("Erro ao buscar usuário logado:", err);
    }
}

// 🔹 Atualiza os dados do usuário logado puxando moedas do backend
async function fetchAndUpdateUserData() {
    if (usuarioLogado.id) {
        try {
            const moedasResponse = await fetch(`https://meu-site4.onrender.com/api/moedas/${usuarioLogado.id}`);
            const moedasData = await moedasResponse.json();

            if (moedasData.status === 'sucesso' && moedasData.moedas !== undefined) {
                usuarioLogado.moedas = moedasData.moedas;
            } else {
                console.error('Erro ao buscar moedas:', moedasData.mensagem);
            }
        } catch (error) {
            console.error('Erro na requisição para atualizar dados do usuário:', error);
        }
    }
    loadUserData();
}

// 🔹 Busca ranking completo no backend
async function fetchRanking() {
    try {
        const res = await fetch('https://meu-site4.onrender.com/api/ranking');
        rankingData = await res.json();
    } catch (err) {
        console.error("Erro ao buscar ranking:", err);
        rankingData = [];
    }
}

const usernameElement = document.getElementById('username');
const userAvatarElement = document.getElementById('user-avatar');
const userXpElement = document.getElementById('user-xp');
const rankingBody = document.getElementById('ranking-body');
const historyTableBody = document.getElementById('history-table-body');
const userBipsHomeElement = document.getElementById('user-bips-home');
const userRankHomeElement = document.getElementById('user-rank-home');
const homeRankingList = document.getElementById('home-ranking-list');

function loadUserData() {
    usernameElement.textContent = usuarioLogado.nome || "Usuário";
    userAvatarElement.src = usuarioLogado.avatar || "https://via.placeholder.com/60";
    userXpElement.textContent = `${usuarioLogado.moedas || 0} BIP`;
    
    // Atualiza os dados na seção "Início"
    userBipsHomeElement.textContent = usuarioLogado.moedas || 0;
    updateAvatarBorder(usuarioLogado.moedas || 0);

    // Pega ranking global do backend para calcular posição do usuário
    fetchRanking().then(() => {
        rankingData.sort((a, b) => b.bip - a.bip);
        const userRankIndex = rankingData.findIndex(user => user.id === usuarioLogado.id);
        if (userRankIndex !== -1) {
            userRankHomeElement.textContent = `#${userRankIndex + 1}`;
        } else {
            userRankHomeElement.textContent = '--';
        }

        // Carrega o top 3 na home
        loadHomeRanking();
    });
}

function updateAvatarBorder(bips) {
    const avatar = document.getElementById("user-avatar");
    avatar.className = "avatar"; // limpa classes anteriores

    if (bips >= 100) {
        avatar.classList.add("level-4");
    } else if (bips >= 50) {
        avatar.classList.add("level-3");
    } else if (bips >= 20) {
        avatar.classList.add("level-2");
    } else {
        avatar.classList.add("level-1");
    }
}


// 🔹 Top 3 global direto do backend
async function loadHomeRanking() {
    try {
        const res = await fetch('https://meu-site4.onrender.com/api/ranking/top3');
        const top3 = await res.json();
        homeRankingList.innerHTML = '';

        top3.forEach((user, index) => {
            const li = document.createElement('li');
            li.className = 'ranking-item';
            li.innerHTML = `
                <span class="rank-number">#${index + 1}</span>
                <img src="${user.avatar}" alt="${user.nome}" class="user-avatar">
                <span>${user.nome} - ${user.bip} BIP</span>
            `;
            homeRankingList.appendChild(li);
        });
    } catch (err) {
        console.error("Erro ao buscar top 3:", err);
    }
}

function showSection(sectionId) {
    const mainContentSections = document.querySelectorAll('.main-content > section');
    mainContentSections.forEach(section => {
        section.style.display = 'none';
    });

    const sectionToShow = document.getElementById(`${sectionId}-section`);
    if (sectionToShow) {
        sectionToShow.style.display = 'block';
    }

    if (sectionId === 'home') {
        loadUserData();
    } else if (sectionId === 'ranking') {
        updateRanking();
    } else if (sectionId === 'ponto') {
        updatePontoHistory();
    }
}

function toggleTopic(topicId) {
    const content = document.getElementById(topicId + '-content');
    const arrow = document.querySelector(`#${topicId} .topic-arrow`);
    
    content.classList.toggle('show');
    arrow.classList.toggle('rotate');
}

// 🔹 Ranking global
async function updateRanking() {
    rankingBody.innerHTML = '';
    await fetchRanking(); // busca no backend
    rankingData.sort((a, b) => b.bip - a.bip);

    rankingData.forEach((user, index) => {
        const row = document.createElement('tr');
        if (index === 0) row.classList.add('position-1');
        if (index === 1) row.classList.add('position-2');
        if (index === 2) row.classList.add('position-3');

        let medal = '';
        if (index === 0) {
            medal = `<svg class="medal" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="10" fill="#FFD700"/>
                <circle cx="12" cy="12" r="8" fill="#FFEC8B"/>
                <text x="12" y="15" text-anchor="middle" font-size="8" font-weight="bold" fill="#8B7500">1°</text>
            </svg>`;
        } else if (index === 1) {
            medal = `<svg class="medal" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="10" fill="#C0C0C0"/>
                <circle cx="12" cy="12" r="8" fill="#E6E6E6"/>
                <text x="12" y="15" text-anchor="middle" font-size="8" font-weight="bold" fill="#505050">2°</text>
            </svg>`;
        } else if (index === 2) {
            medal = `<svg class="medal" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="10" fill="#CD7F32"/>
                <circle cx="12" cy="12" r="8" fill="#E6C39A"/>
                <text x="12" y="15" text-anchor="middle" font-size="8" font-weight="bold" fill="#5E3A00">3°</text>
            </svg>`;
        }

        row.innerHTML = `
    <td>${index + 1} ${medal}</td>
    <td class="user-cell">
        <div class="avatar-container ${getBorderClass(user.bip)}">
            <img src="${user.avatar}" alt="${user.nome}" class="user-avatar">
        </div>
        ${user.nome}
    </td>
    <td class="xp-cell">
        <span class="xp-coins">${user.bip} BIP</span>
    </td>
`;
        rankingBody.appendChild(row);
    });
}

function getBorderClass(bips) {
    if (bips >= 200) return "borda-ouro";
    if (bips >= 100) return "borda-prata";
    if (bips >= 50) return "borda-bronze";
    return "borda-padrao";
}

function registrarPontosQuiz(pontosGanhos) {
  const usuarioId = sessionStorage.getItem("userId");
  fetch("https://meu-site4.onrender.com/api/pontos-extra", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ usuario_id: usuarioId, origem: "quiz", pontos: pontosGanhos })
  })
  .then(res => res.json())
  .then(data => {
    alert(data.mensagem);
  });
}

function registrarPontosQuiz(pontosGanhos) {
  const usuarioId = sessionStorage.getItem("userId");
  fetch("https://meu-site4.onrender.com/api/pontos-extra", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ usuario_id: usuarioId, origem: "fire", pontos: pontosGanhos })
  })
  .then(res => res.json())
  .then(data => {
    alert(data.mensagem);
  });
}

function registrarPontosQuiz(pontosGanhos) {
  const usuarioId = sessionStorage.getItem("userId");
  fetch("https://meu-site4.onrender.com/api/pontos-extra", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ usuario_id: usuarioId, origem: "memory", pontos: pontosGanhos })
  })
  .then(res => res.json())
  .then(data => {
    alert(data.mensagem);
  });
}

// 🔹 Histórico de pontos continua igual
async function updatePontoHistory() {
    if (!usuarioLogado || !usuarioLogado.id) {
        historyTableBody.innerHTML = '<tr><td colspan="3" class="no-data">Por favor, faça login para ver o histórico.</td></tr>';
        return;
    }

    try {
        const res = await fetch(`https://meu-site4.onrender.com/api/pontos/${usuarioLogado.id}`);

        if (!res.ok) {
            if (res.status === 404) {
                historyTableBody.innerHTML = '<tr><td colspan="3" class="no-data">Nenhum ponto registrado para este usuário.</td></tr>';
                return;
            }
            throw new Error(`HTTP error! status: ${res.status}`);
        }
        const data = await res.json();

        historyTableBody.innerHTML = '';
        if (data.pontos && data.pontos.length > 0) {
            data.pontos.forEach(record => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${record.data}</td>
                    <td>${record.hora}</td>
                    <td>${record.moedas}</td>
                `;
                historyTableBody.appendChild(row);
            });
        } else {
            const row = document.createElement('tr');
            row.innerHTML = `<td colspan="3" class="no-data">Nenhum ponto registrado.</td>`;
            historyTableBody.appendChild(row);
        }
    } catch (error) {
        console.error('Erro ao buscar histórico de pontos:', error);
        historyTableBody.innerHTML = `<tr><td colspan="3" class="no-data">Erro ao carregar dados. Tente novamente.</td></tr>`;
    }
}

// Recupera o id do usuário logado (da URL ?user_id=... ou sessionStorage)
function getUserId() {
    const params = new URLSearchParams(window.location.search);
    return params.get("user_id") || sessionStorage.getItem("userId") || null;
}

// 🔹 Início da página
window.onload = async () => {
    const id = getUserId();

    if (id) {
        usuarioLogado.id = id;                    // garante que temos o ID
        await fetchUsuarioLogado(usuarioLogado.id);  // busca nome e avatar
        await fetchAndUpdateUserData();              // busca moedas (BIPs)
    }

    showSection('home');

    // 👉 Upload de avatar (colocar aqui dentro)
    const avatarUpload = document.getElementById("avatar-upload");
    const userAvatarElement = document.getElementById("user-avatar");

    // Quando o usuário clicar no avatar → abre o seletor
    userAvatarElement.addEventListener("click", () => {
        avatarUpload.click();
    });

    // Quando o usuário escolher uma imagem → mostra no avatar
    avatarUpload.addEventListener("change", (event) => {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                userAvatarElement.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }
    });
};



    </script>
    <!-- Biblioteca de ícones Lucide -->
<script src="https://unpkg.com/lucide@latest"></script>
<script>
  lucide.createIcons(); // Ativa os ícones
</script>

</body>
</html>
