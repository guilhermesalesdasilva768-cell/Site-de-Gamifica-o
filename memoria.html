<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Jogo da Mem√≥ria - BIP</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(to bottom right, #fdfbfb, #ebedee);
            text-align: center;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            
            /* CSS para desabilitar sele√ß√£o de texto */
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        h1 {
            color: #444;
            margin-bottom: 20px;
        }
        #startButton {
            padding: 10px 20px;
            font-size: 1rem;
            cursor: pointer;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        #startButton:hover {
            background-color: #0056b3;
        }
        #game-board {
            display: grid;
            grid-template-columns: repeat(4, 100px);
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }
        .card {
            width: 100px;
            height: 100px;
            background: #ddd;
            border-radius: 10px;
            font-size: 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .matched {
            background: #9be7a7;
            pointer-events: none;
        }
        #mensagem {
            margin-top: 20px;
            font-weight: bold;
        }
        #info {
            margin-top: 15px;
            font-size: 1rem;
        }
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
    </style>
</head>
<body>
    <h1>üß† Jogo da Mem√≥ria</h1>
    <div class="container">
        <p>Complete o jogo para ganhar <strong>10 BIPs!</strong></p>
        <button id="startButton">Come√ßar</button>
        <div id="game-board"></div>
        <div id="mensagem"></div>
        <div id="info"></div>
    </div>
    <script>
        // Bloqueia o clique direito
        document.addEventListener('contextmenu', function(event) {
            event.preventDefault();
            alert('Fun√ß√£o de inspe√ß√£o desabilitada!');
        });

        // Bloqueia combina√ß√µes de teclas para captura de tela
        document.addEventListener('keydown', function(event) {
            if (event.key === 'PrintScreen' || event.keyCode === 44 || 
                (event.ctrlKey && event.key === 'p') || (event.metaKey && event.key === 's')) {
                event.preventDefault();
                alert('Captura de tela desabilitada!');
            }
        });

        let usuarioLogado = JSON.parse(localStorage.getItem('usuarioLogado')) || { nome: "Usu√°rio", avatar: "", bip: 0 };
        let rankingData = JSON.parse(localStorage.getItem('rankingData')) || [];
        const emojis = ['üçé', 'üçå', 'üçá', 'üçâ', 'üçä', 'ü•ù', 'üçì', 'üçç'];
        let cards = [...emojis, ...emojis].sort(() => 0.5 - Math.random());
        const board = document.getElementById('game-board');
        let firstCard = null;
        let secondCard = null;
        let lock = false;
        let matches = 0;
        let errors = 0;
        const maxErrors = 3;
        const mensagemDiv = document.getElementById('mensagem');
        const infoDiv = document.getElementById('info');
        const startButton = document.getElementById('startButton');
        
        function displayInfo() {
            infoDiv.textContent = `Erros: ${errors} / ${maxErrors}`;
        }
        
        function initGame() {
            cards = [...emojis, ...emojis].sort(() => 0.5 - Math.random());
            board.innerHTML = '';
            firstCard = null;
            secondCard = null;
            lock = false;
            matches = 0;
            errors = 0;
            mensagemDiv.textContent = '';
            displayInfo();
            
            cards.forEach((emoji, i) => {
                const div = document.createElement('div');
                div.classList.add('card');
                div.dataset.emoji = emoji;
                div.dataset.index = i;
                div.addEventListener('click', () => flipCard(div));
                board.appendChild(div);
                
                setTimeout(() => {
                    div.textContent = emoji;
                }, 100);
                
                setTimeout(() => {
                    div.textContent = '';
                }, 2000);
            });
            
            startButton.disabled = true;
        }
        
        function flipCard(card) {
            if (lock || card === firstCard || card.textContent || card.classList.contains('matched') || errors >= maxErrors || !startButton.disabled) return;
            card.textContent = card.dataset.emoji;
            
            if (!firstCard) {
                firstCard = card;
            } else {
                secondCard = card;
                lock = true;
                
                if (firstCard.dataset.emoji === secondCard.dataset.emoji) {
                    firstCard.classList.add('matched');
                    secondCard.classList.add('matched');
                    matches++;
                    resetCards();
                    
                    if (matches === emojis.length) {
                        setTimeout(win, 500);
                    } else {
                        lock = false;
                    }
                } else {
                    setTimeout(() => {
                        firstCard.textContent = '';
                        secondCard.textContent = '';
                        errors++;
                        displayInfo();
                        resetCards();
                        
                        if (errors >= maxErrors) {
                            setTimeout(lose, 500);
                        }
                    }, 1000);
                }
            }
        }
        
        function resetCards() {
            firstCard = null;
            secondCard = null;
            lock = false;
        }
        
        function win() {
            mensagemDiv.textContent = "üéâ Parab√©ns! Voc√™ ganhou 10 BIPs!";
            usuarioLogado.bip += 10;
            updateRankingAndStorage();
            
            setTimeout(() => {
                window.location.href = 'dashboard.html#fun';
            }, 1000);
        }
        
        function lose() {
            mensagemDiv.textContent = `‚ùå Game Over! Voc√™ atingiu o limite de ${maxErrors} erros.`;
            usuarioLogado.bip = Math.max(0, usuarioLogado.bip - 3);
            updateRankingAndStorage();
            
            setTimeout(() => {
                window.location.href = 'dashboard.html#fun';
            }, 2000);
        }
        
        function updateRankingAndStorage() {
            const idx = rankingData.findIndex(u => u.nome === usuarioLogado.nome);
            if (idx !== -1) {
                rankingData[idx].bip = usuarioLogado.bip;
            } else {
                rankingData.push({
                    nome: usuarioLogado.nome,
                    avatar: usuarioLogado.avatar,
                    bip: usuarioLogado.bip
                });
            }
            localStorage.setItem('usuarioLogado', JSON.stringify(usuarioLogado));
            localStorage.setItem('rankingData', JSON.stringify(rankingData.sort((a, b) => b.bip - a.bip)));
        }
        
        startButton.addEventListener('click', initGame);
    </script>
</body>
</html>
